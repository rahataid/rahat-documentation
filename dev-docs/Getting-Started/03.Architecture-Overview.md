---
sidebar_position: 3
title: Architecture Overview
---

# Architecture Overview

Rahat is built on a microservices architecture with blockchain integration. This document provides an overview of the system's architecture.

## High-Level Architecture

![Architecture Diagram](../assets/tech_stack.png)

The Rahat platform consists of the following major components:

1. **Smart Contracts**: The blockchain layer that handles token creation, distribution, and redemption
2. **API Services**: Backend services that connect the web application with the blockchain
3. **Web Application**: Admin dashboard and management interface
4. **Caching Layer**: Indexing service for blockchain data
5. **SMS/IVR Services**: Integration with telecom services for non-smartphone users
6. **Vendor Apps**: Applications for vendors to accept tokens
7. **Beneficiary Interface**: Mobile applications or SMS interfaces for beneficiaries

## Component Interactions

### Data Flow

```
Frontend → API Services → Smart Contracts → Blockchain
             ↑                     ↓
             ↑                     ↓
        Database   ←   Indexing Service
```

1. The frontend makes API calls to the backend services
2. The API services interact with the smart contracts on the blockchain
3. The indexing service monitors blockchain events and updates the database
4. The database provides fast access to indexed blockchain data

### Authentication & Authorization Flow

Rahat uses a role-based access control system:

1. **Authentication**: JWT-based authentication for API services
2. **Blockchain Authentication**: Wallet-based authentication for blockchain interactions
3. **Authorization**: Role-based permissions managed at the API level

## Technical Stack

### Frontend
- **Next.js**: React framework for the web application
- **Ethers.js**: For blockchain interactions
- **TailwindCSS**: For styling

### Backend
- **NestJS**: TypeScript-based backend framework
- **PostgreSQL**: Relational database for structured data
- **Redis**: For caching and session management

### Blockchain
- **Ethereum**: Main blockchain platform
- **Solidity**: Smart contract programming language
- **Hardhat**: Development environment

### Indexing & Caching
- **TheGraph**: For indexing blockchain data
- **PostgreSQL**: For storing indexed data

### Communication
- **Twilio**: For SMS integration
- **Asterisk**: For IVR (Interactive Voice Response) systems

## Service-to-Service Communication

Services communicate through:
- RESTful APIs
- WebSockets for real-time updates
- Message queues for asynchronous processing

## Deployment Architecture

Rahat can be deployed in various configurations:

1. **Development**: Local environment with Docker
2. **Staging**: Cloud-based deployment with CI/CD pipelines
3. **Production**: Kubernetes-based deployment with high availability

## Security Considerations

The architecture addresses security through:
- Smart contract audits
- API authentication and authorization
- Data encryption
- Input validation
- Rate limiting

## Scalability

The architecture supports horizontal scaling of:
- API services
- Indexing nodes
- Database replicas

This modular architecture allows for independent development and scaling of each component based on demand.
