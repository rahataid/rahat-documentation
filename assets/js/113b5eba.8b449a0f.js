"use strict";(self.webpackChunkrahat_documentation=self.webpackChunkrahat_documentation||[]).push([[2231],{8500:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"Project-Modules/Anticipatory-Action/Installation","title":"Installation","description":"This guide provides comprehensive setup instructions for the Rahat Anticipatory Action (AA) project - a decentralized platform for managing anticipatory action projects to enhance community resilience against climate shocks.","source":"@site/dev-docs/Project-Modules/01.Anticipatory-Action/02.Installation.md","sourceDirName":"Project-Modules/01.Anticipatory-Action","slug":"/Project-Modules/Anticipatory-Action/Installation","permalink":"/dev-docs/Project-Modules/Anticipatory-Action/Installation","draft":false,"unlisted":false,"editUrl":"https://github.com/rahataid/rahat-documentation/blob/dev/dev-docs/Project-Modules/01.Anticipatory-Action/02.Installation.md","tags":[],"version":"current","lastUpdatedAt":1758175636000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Installation"},"sidebar":"myAutogeneratedSidebar","previous":{"title":"Rahat Users Management","permalink":"/dev-docs/Core-Modules/Rahat-Users-Management"},"next":{"title":"Introduction","permalink":"/dev-docs/Project-Modules/Anticipatory-Action/Introduction"}}');var r=s(74848),t=s(28453);const l={sidebar_position:1,title:"Installation"},a=void 0,c={},o=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Project Overview",id:"project-overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installing Blockchain Prerequisites",id:"installing-blockchain-prerequisites",level:3},{value:"Rust (for Soroban contracts)",id:"rust-for-soroban-contracts",level:4},{value:"Stellar CLI",id:"stellar-cli",level:4},{value:"Dependencies Setup",id:"dependencies-setup",level:2},{value:"1. Rahat Platform (Core Services)",id:"1-rahat-platform-core-services",level:3},{value:"2. Rahat Triggers",id:"2-rahat-triggers",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Environment Variables Explained",id:"environment-variables-explained",level:3},{value:"Database Setup",id:"database-setup",level:2},{value:"Database Schema Overview",id:"database-schema-overview",level:3},{value:"Running the Application",id:"running-the-application",level:2},{value:"Development Mode",id:"development-mode",level:3},{value:"Production Mode",id:"production-mode",level:3},{value:"Available Scripts",id:"available-scripts",level:2},{value:"Development",id:"development",level:3},{value:"Database Management",id:"database-management",level:3},{value:"Testing",id:"testing",level:3},{value:"Triggers and Automation",id:"triggers-and-automation",level:3},{value:"Smart Contracts",id:"smart-contracts",level:3},{value:"Soroban Contracts (Stellar)",id:"soroban-contracts-stellar",level:3},{value:"Graph Protocol",id:"graph-protocol",level:3},{value:"Development Guide",id:"development-guide",level:2},{value:"Project Structure",id:"project-structure",level:3},{value:"Adding New Features",id:"adding-new-features",level:3},{value:"Database Schema Updates",id:"database-schema-updates",level:3},{value:"Blockchain Integration",id:"blockchain-integration",level:2},{value:"Stellar Soroban Contracts",id:"stellar-soroban-contracts",level:3},{value:"EVM Smart Contracts",id:"evm-smart-contracts",level:3},{value:"Testing",id:"testing-1",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"This guide provides comprehensive setup instructions for the Rahat Anticipatory Action (AA) project - a decentralized platform for managing anticipatory action projects to enhance community resilience against climate shocks."}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#project-overview",children:"Project Overview"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#architecture",children:"Architecture"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prerequisites",children:"Prerequisites"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dependencies-setup",children:"Dependencies Setup"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#installation",children:"Installation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#configuration",children:"Configuration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#database-setup",children:"Database Setup"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#running-the-application",children:"Running the Application"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#available-scripts",children:"Available Scripts"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#development-guide",children:"Development Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#testing",children:"Testing"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#api-documentation",children:"API Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"project-overview",children:"Project Overview"}),"\n",(0,r.jsx)(n.p,{children:"Rahat Anticipatory Action is part of the Rahat ecosystem that focuses on:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ud83c\udf0a ",(0,r.jsx)(n.strong,{children:"Climate Risk Management"}),": Monitor weather patterns and hydrological data"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83c\udfaf ",(0,r.jsx)(n.strong,{children:"Automated Triggers"}),": Configure hazard indicators and automated responses"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcb0 ",(0,r.jsx)(n.strong,{children:"Financial Assistance"}),": Manage cash/voucher assistance programs"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcca ",(0,r.jsx)(n.strong,{children:"Multi-source Forecasting"}),": Integrate data from DHM, GLOFAS, and other sources"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udd17 ",(0,r.jsx)(n.strong,{children:"Dual Blockchain Integration"}),": Support for both Stellar Soroban and EVM-compatible networks"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udc8e ",(0,r.jsx)(n.strong,{children:"Smart Contracts"}),": Deploy on Stellar Soroban or EVM chains (Polygon, Arbitrum, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udc65 ",(0,r.jsx)(n.strong,{children:"Beneficiary Management"}),": Track and support vulnerable communities"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(n.p,{children:"The project is built using:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"NestJS"}),": Scalable Node.js framework"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Prisma"}),": Database ORM with PostgreSQL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Redis"}),": Caching and session management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bull/BullMQ"}),": Queue management for background jobs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stellar SDK"}),": Blockchain integration for Stellar Soroban smart contracts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ethers.js"}),": EVM blockchain integration for Ethereum-compatible networks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nx"}),": Monorepo tooling for scalable development"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.p,{children:["Before setting up this project, ensure you have the basic prerequisites mentioned in the ",(0,r.jsx)(n.a,{href:"/dev-docs/Getting-Started/01.Prerequisites",children:"Getting Started"})," section of this documentation."]}),"\n",(0,r.jsx)(n.p,{children:"For blockchain development, you'll also need:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rust"}),": For Soroban smart contract development (optional)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stellar CLI"}),": For Stellar/Soroban contract deployment (optional)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"installing-blockchain-prerequisites",children:"Installing Blockchain Prerequisites"}),"\n",(0,r.jsx)(n.h4,{id:"rust-for-soroban-contracts",children:"Rust (for Soroban contracts)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\nrustup target add wasm32-unknown-unknown\n"})}),"\n",(0,r.jsx)(n.h4,{id:"stellar-cli",children:"Stellar CLI"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# macOS\nbrew install stellar-cli\n\n# Linux\n# Download from https://github.com/stellar/soroban-cli/releases\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dependencies-setup",children:"Dependencies Setup"}),"\n",(0,r.jsx)(n.p,{children:"This project requires two other Rahat services to be running:"}),"\n",(0,r.jsx)(n.h3,{id:"1-rahat-platform-core-services",children:"1. Rahat Platform (Core Services)"}),"\n",(0,r.jsxs)(n.p,{children:["The core platform provides foundational services and APIs. Please follow the ",(0,r.jsx)(n.a,{href:"/dev-docs/Getting-Started/02.Setting-up-Local-Environment",children:"Rahat Platform Setup"})," guide to install and configure the platform."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Platform Services Include:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Core API at ",(0,r.jsx)(n.code,{children:"http://localhost:5501"})]}),"\n",(0,r.jsx)(n.li,{children:"Beneficiary services"}),"\n",(0,r.jsx)(n.li,{children:"Database management"}),"\n",(0,r.jsx)(n.li,{children:"Authentication services"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-rahat-triggers",children:"2. Rahat Triggers"}),"\n",(0,r.jsx)(n.p,{children:"The triggers service handles automated responses and monitoring."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clone the triggers repository\ngit clone https://github.com/rahataid/rahat-project-triggers.git\ncd rahat-project-triggers\n\n# Install dependencies\npnpm install\n\n# Copy environment configuration\ncp .env.example .env\n\n# Start the service\npnpm dev\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Triggers Services Include:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Activity management"}),"\n",(0,r.jsx)(n.li,{children:"Trigger engine"}),"\n",(0,r.jsx)(n.li,{children:"Forecasting integration"}),"\n",(0,r.jsx)(n.li,{children:"Communication hub"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Clone the repository"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/rahataid/rahat-project-aa.git\ncd rahat-project-aa\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install dependencies"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm install\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Copy environment configuration"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:".env"})," file with your environment-specific values:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"# Project Configuration\nPROJECT_ID=45606343-e6f5-475f-a2b3-f31d6ab10733\n\n# Redis Configuration\nREDIS_HOST=localhost\nREDIS_PORT=6666\nREDIS_PASSWORD=rahat123\n\n# Database Configuration\nDB_HOST=localhost\nDB_PORT=5555\nDB_USERNAME=rahat\nDB_PASSWORD=rahat123\nDB_NAME=rahat-aa\nDB_RAHAT_CORE=rahat-platform-nx\nDB_RAHAT_TRIGGERS=rahat-triggers\n\n# Database URLs\nDATABASE_URL=postgresql://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?schema=public\nCORE_DATABASE_URL=postgresql://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_RAHAT_CORE}?schema=public\nTRIGGER_DATABASE_URL=postgresql://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_RAHAT_TRIGGERS}?schema=public\n\n# Project Settings\nACTIVE_YEAR=2024\nRIVER_BASIN=Karnali\n\n# Stellar Configuration (for blockchain operations)\nSDP_VERIFICATION_PIN=\nBASE_URL=\nADMIN_BASE_URL=\nRECERIVER_BASE_URL=\nFRIEND_BOT_STELLAR=\nSTELLAR_DEMO_WALLET=\nHORIZON_URL=\nFUNDING_AMOUNT=\n\n# EVM Configuration (uncomment to use EVM chains)\n# NETWORK_PROVIDER=http://127.0.0.1:8888\n# CHAIN_NAME=localhost\n# CHAIN_ID=8888\n# CURRENCY_NAME=ETH\n# CURRENCY_SYMBOL=ETH\n# DEPLOYER_PRIVATE_KEY=your_private_key\n# RAHAT_ADMIN_PRIVATE_KEY=your_admin_private_key\n"})}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables-explained",children:"Environment Variables Explained"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Required"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PROJECT_ID"})}),(0,r.jsx)(n.td,{children:"Unique identifier for the AA project"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"REDIS_HOST"})}),(0,r.jsx)(n.td,{children:"Redis server hostname"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"REDIS_PORT"})}),(0,r.jsx)(n.td,{children:"Redis server port"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"REDIS_PASSWORD"})}),(0,r.jsx)(n.td,{children:"Redis authentication password"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_HOST"})}),(0,r.jsx)(n.td,{children:"PostgreSQL hostname"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_PORT"})}),(0,r.jsx)(n.td,{children:"PostgreSQL port"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_USERNAME"})}),(0,r.jsx)(n.td,{children:"Database username"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_PASSWORD"})}),(0,r.jsx)(n.td,{children:"Database password"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_NAME"})}),(0,r.jsx)(n.td,{children:"Main AA database name"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_RAHAT_CORE"})}),(0,r.jsx)(n.td,{children:"Core platform database name"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"DB_RAHAT_TRIGGERS"})}),(0,r.jsx)(n.td,{children:"Triggers service database name"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ACTIVE_YEAR"})}),(0,r.jsx)(n.td,{children:"Current project year"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RIVER_BASIN"})}),(0,r.jsx)(n.td,{children:"Target river basin for monitoring"}),(0,r.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"database-setup",children:"Database Setup"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Generate Prisma client"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm prisma:generate\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Run database migrations"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pnpm migrate\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Seed the database (optional)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Seed all data\npnpm seed:all\n\n# Or seed specific components\npnpm seed:aa\npnpm seed:stellar\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"database-schema-overview",children:"Database Schema Overview"}),"\n",(0,r.jsx)(n.p,{children:"The AA project uses multiple databases:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Main AA Database"}),": Stores project-specific data, triggers, and beneficiary information"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Core Platform Database"}),": Shared services and user management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Triggers Database"}),": Automated response and monitoring data"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"running-the-application",children:"Running the Application"}),"\n",(0,r.jsx)(n.h3,{id:"development-mode",children:"Development Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Start the application in development mode with hot reload\npnpm dev\n"})}),"\n",(0,r.jsx)(n.h3,{id:"production-mode",children:"Production Mode"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Build the application\npnpm build:all\n\n# Start the production server\npnpm start\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The application will be available at ",(0,r.jsx)(n.code,{children:"http://localhost:3000"})," (or the port specified in your configuration)."]}),"\n",(0,r.jsx)(n.h2,{id:"available-scripts",children:"Available Scripts"}),"\n",(0,r.jsx)(n.h3,{id:"development",children:"Development"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm dev"})," - Start development server with hot reload"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm start"})," - Start production server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm build:all"})," - Build all applications"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"database-management",children:"Database Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm migrate"})," - Run database migrations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm migrate:dev"})," - Run migrations in development"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm migrate:reset"})," - Reset database and migrations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm prisma:studio"})," - Open Prisma Studio for database management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm prisma:generate"})," - Generate Prisma client"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm test"})," - Run unit tests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm test:e2e"})," - Run end-to-end tests"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm test:cov"})," - Run tests with coverage"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"triggers-and-automation",children:"Triggers and Automation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm trigger-activation"})," - Trigger activation processes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm trigger-readiness"})," - Trigger readiness processes"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"smart-contracts",children:"Smart Contracts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm contracts:compile"})," - Compile EVM smart contracts (Solidity)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm contracts:test"})," - Test EVM smart contracts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm contracts:deploy:amoy"})," - Deploy to Polygon Amoy testnet"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"soroban-contracts-stellar",children:"Soroban Contracts (Stellar)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stellar contract build"})," - Build Soroban contracts (from soroban/trigger directory)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stellar contract deploy"})," - Deploy Soroban contracts to Stellar network"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"stellar network add"})," - Add Stellar network configuration"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"graph-protocol",children:"Graph Protocol"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm graph:create-local"})," - Create local subgraph"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pnpm graph:deploy-local"})," - Deploy subgraph locally"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"development-guide",children:"Development Guide"}),"\n",(0,r.jsx)(n.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"apps/\n\u251c\u2500\u2500 aa/                 # Main Anticipatory Action application\n\u251c\u2500\u2500 aa-e2e/            # End-to-end tests\n\u251c\u2500\u2500 contracts/         # EVM smart contracts (Solidity)\n\u2514\u2500\u2500 graph/             # The Graph Protocol subgraph\n\nlibs/\n\u251c\u2500\u2500 cva/               # Cash and Voucher Assistance library\n\u2514\u2500\u2500 stellar-sdk/       # Stellar blockchain integration\n\nsoroban/\n\u2514\u2500\u2500 trigger/           # Soroban smart contracts (Rust)\n\nprisma/\n\u251c\u2500\u2500 schema.prisma      # Database schema\n\u251c\u2500\u2500 migrations/        # Database migrations\n\u2514\u2500\u2500 seed*.ts          # Database seeding scripts\n"})}),"\n",(0,r.jsx)(n.h3,{id:"adding-new-features",children:"Adding New Features"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create feature branches from ",(0,r.jsx)(n.code,{children:"main"})]}),"\n",(0,r.jsx)(n.li,{children:"Follow NestJS module structure"}),"\n",(0,r.jsx)(n.li,{children:"Add appropriate tests"}),"\n",(0,r.jsx)(n.li,{children:"Update documentation"}),"\n",(0,r.jsx)(n.li,{children:"Submit pull request"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"database-schema-updates",children:"Database Schema Updates"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Modify ",(0,r.jsx)(n.code,{children:"prisma/schema.prisma"})]}),"\n",(0,r.jsxs)(n.li,{children:["Create migration: ",(0,r.jsx)(n.code,{children:"pnpm migrate:dev:create"})]}),"\n",(0,r.jsxs)(n.li,{children:["Apply migration: ",(0,r.jsx)(n.code,{children:"pnpm migrate"})]}),"\n",(0,r.jsx)(n.li,{children:"Update seed files if necessary"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"blockchain-integration",children:"Blockchain Integration"}),"\n",(0,r.jsx)(n.p,{children:"This project supports multiple blockchain integration, allowing deployment on both Stellar Soroban and EVM-compatible networks:"}),"\n",(0,r.jsx)(n.h3,{id:"stellar-soroban-contracts",children:"Stellar Soroban Contracts"}),"\n",(0,r.jsxs)(n.p,{children:["Located in ",(0,r.jsx)(n.code,{children:"soroban/trigger/"}),", these Rust-based smart contracts provide:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Trigger management on Stellar network"}),"\n",(0,r.jsx)(n.li,{children:"Native integration with Stellar assets"}),"\n",(0,r.jsx)(n.li,{children:"Low transaction costs and fast finality"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Setup Requirements:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install Stellar CLI\nbrew install stellar-cli\n\n# Install Rust\ncurl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\nrustup target add wasm32-unknown-unknown\n\n# Build contracts (from soroban/trigger directory)\ncd soroban/trigger\nstellar contract build\n"})}),"\n",(0,r.jsx)(n.h3,{id:"evm-smart-contracts",children:"EVM Smart Contracts"}),"\n",(0,r.jsxs)(n.p,{children:["Located in ",(0,r.jsx)(n.code,{children:"apps/contracts/"}),", these Solidity contracts support:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Deployment on Polygon, Arbitrum, Ethereum, and other EVM chains"}),"\n",(0,r.jsx)(n.li,{children:"Integration with existing DeFi ecosystems"}),"\n",(0,r.jsx)(n.li,{children:"Comprehensive testing with Hardhat"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Supported Networks:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Polygon Amoy (Testnet)"}),"\n",(0,r.jsx)(n.li,{children:"Arbitrum Sepolia (Testnet)"}),"\n",(0,r.jsx)(n.li,{children:"Local development networks"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Contract Operations:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Compile contracts\npnpm contracts:compile\n\n# Run tests\npnpm contracts:test\n\n# Deploy to testnet\npnpm contracts:deploy:amoy\n"})}),"\n",(0,r.jsx)(n.h2,{id:"testing-1",children:"Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Run all tests\npnpm test\n\n# Run tests with coverage\npnpm test:cov\n\n# Run end-to-end tests\npnpm test:e2e\n\n# Test EVM contracts\npnpm contracts:test\n\n# Test Soroban contracts (from soroban/trigger directory)\ncd soroban/trigger && stellar contract test\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Database Connection Errors"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure PostgreSQL is running"}),"\n",(0,r.jsxs)(n.li,{children:["Check database credentials in ",(0,r.jsx)(n.code,{children:".env"})]}),"\n",(0,r.jsx)(n.li,{children:"Verify database exists"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Redis Connection Errors"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure Redis server is running"}),"\n",(0,r.jsxs)(n.li,{children:["Check Redis configuration in ",(0,r.jsx)(n.code,{children:".env"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Dependency Services Not Running"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Make sure rahat-platform is running"}),"\n",(0,r.jsx)(n.li,{children:"Verify rahat-triggers service is active"}),"\n",(0,r.jsx)(n.li,{children:"Check service endpoints in configuration"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Blockchain Integration Issues"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify network configuration"}),"\n",(0,r.jsx)(n.li,{children:"Check private keys and wallet setup"}),"\n",(0,r.jsx)(n.li,{children:"Ensure sufficient funds for deployment"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);