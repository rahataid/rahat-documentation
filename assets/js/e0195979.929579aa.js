"use strict";(self.webpackChunkrahat_documentation=self.webpackChunkrahat_documentation||[]).push([[6964],{20266:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"referral_voucher_project","title":"Referral Voucher Project","description":"Overview","source":"@site/versioned_docs/version-2.1/Referral_voucher_project.md","sourceDirName":".","slug":"/referral_voucher_project","permalink":"/docs/2.1/referral_voucher_project","draft":false,"unlisted":false,"editUrl":"https://github.com/rahataid/rahat-documentation/blob/dev/versioned_docs/version-2.1/Referral_voucher_project.md","tags":[],"version":"2.1","lastUpdatedAt":1758175872000,"frontMatter":{"id":"referral_voucher_project"},"sidebar":"tutorialSidebar","previous":{"title":"AA Project","permalink":"/docs/2.1/aa_project"},"next":{"title":"Contribution Guideline","permalink":"/docs/2.1/contributing_guidelines"}}');var i=n(74848),a=n(28453);const o={id:"referral_voucher_project"},l="Referral Voucher Project",s={},c=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Run locally",id:"run-locally",level:2},{value:"Deployment Checklist",id:"deployment-checklist",level:3},{value:"Deployment of Subgraph",id:"deployment-of-subgraph",level:3},{value:"For further information follow graph documentation",id:"for-further-information-follow-graph-documentation",level:4},{value:"About Graph Sdk",id:"about-graph-sdk",level:3}];function h(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"referral-voucher-project",children:"Referral Voucher Project"})}),"\n",(0,i.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(r.p,{children:"Referral Project provides Voucher Redemption support to affiliated vendors during the voucher distribution and referral management projects Instead of traditional in-kind aid, such as distributing physical vouchers, the Referral Voucher system gives beneficiaries the flexibility to redeem and refer into the project."}),"\n",(0,i.jsx)(r.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(r.p,{children:["Before you begin, go to the rahat-core repo and run the ",(0,i.jsx)(r.a,{href:"https://github.com/rahataid/rahat-platform",children:"rahat-core"})," project. This project is dependent on the rahat-core project."]}),"\n",(0,i.jsx)(r.p,{children:"Also ensure your system has the following dependencies installed:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Docker: Version 20.10.7 or higher"}),"\n",(0,i.jsx)(r.li,{children:"Node.js: Version 20.10.0 or higher"}),"\n",(0,i.jsx)(r.li,{children:"pnpm (Package Manager): Version 6.16.1 or higher"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"run-locally",children:"Run locally"}),"\n",(0,i.jsx)(r.p,{children:"Step1: Clone project"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"git clone git@github.com:rahataid/rahat-platform.git\n"})}),"\n",(0,i.jsx)(r.p,{children:"Step2: Go to the project directory and bootstrap the project"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"pnpm bootstrap\n"})}),"\n",(0,i.jsx)(r.p,{children:"Step3: Run the project"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"pnpm start\n"})}),"\n",(0,i.jsx)(r.h3,{id:"deployment-checklist",children:"Deployment Checklist"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Deploy and verify contracts in public chain from local machine"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Deploy subgraph for the deployed contract"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Update .env file of Rahat-Core(rahat-platform)"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Update blockchain network details"}),"\n",(0,i.jsx)(r.li,{children:"Update communication message sender API"}),"\n",(0,i.jsx)(r.li,{children:"Update ERC2771Frowarder contract address and Rahat Admin Private Key"}),"\n",(0,i.jsx)(r.li,{children:"Update subgraph URL"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Run seed script in Rahat-Core to create the users, roles and permissions and update the settings"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Settings should include CHAIN_SETTINGS and SUBGRPAH_URL"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Create a project in Rahat-Core and get the Project-Id"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Update .env file of Rahat-Project-El"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Update blockchain network details"}),"\n",(0,i.jsx)(r.li,{children:"Update Rahat-Admin-Private-Key"}),"\n",(0,i.jsx)(r.li,{children:"Update Project-Id"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Run production seed script in Rahat-Project-El to create the project and update the settings"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Settings should include CONTRACT, BLOCKCHAIN and SUBGRPAH_URL"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Update the .env in rahat-ui frontend"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Update the API_URL"}),"\n",(0,i.jsx)(r.li,{children:"Update the Communication API and application Id"}),"\n",(0,i.jsx)(r.li,{children:"Update chain-settings and subgraph-url"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"deployment-of-subgraph",children:"Deployment of Subgraph"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Update the contract addresses in the network.json file, following the specified format in the file."}),"\n",(0,i.jsx)(r.li,{children:"Authorize the graph using the authorization key available in your Subgraph Studio account."}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"    graph auth --studio <Authorization_key>\n"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Deploy the graph"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"graph deploy --studio <subgraph_slug_name>\n"})}),"\n",(0,i.jsxs)(r.h4,{id:"for-further-information-follow-graph-documentation",children:["For further information follow ",(0,i.jsx)(r.a,{href:"https://thegraph.com/docs/en/quick-start/#5-deploy-to-subgraph-studio",children:"graph documentation"})]}),"\n",(0,i.jsx)(r.h3,{id:"about-graph-sdk",children:"About Graph Sdk"}),"\n",(0,i.jsx)(r.p,{children:"Sdk for graph query is designed for referral project\nYou need to install graph sdk in rahat-ui for graph query"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"pnpm install @rahataid/el-subgraph\n"})}),"\n",(0,i.jsx)(r.p,{children:"You need to import graph query from the sdk you imported"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"import { GraphQuery } from '@rahataid/el-subgraph';\n"})}),"\n",(0,i.jsx)(r.p,{children:"You need to create the sub graph provider"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"    <GraphContext.Provider\n      value={{\n        queryService: new GraphQuery(\n          <SUBGRAPH_API>,\n        ),\n      }}\n    >\n      {children}\n    </GraphContext.Provider>\n"})}),"\n",(0,i.jsx)(r.p,{children:"You need to wrap the above created provider in your project layout"}),"\n",(0,i.jsx)(r.p,{children:"You can call the function from GraphQuery Within your project"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"  const { queryService } = useGraphService();\n"})}),"\n",(0,i.jsx)(r.p,{children:"You can access required function"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"queryService.useProjectTransaction()\n"})})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>l});var t=n(96540);const i={},a=t.createContext(i);function o(e){const r=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:r},e.children)}}}]);